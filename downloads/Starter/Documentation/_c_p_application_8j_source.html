<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>API: AppKit/CPApplication.j Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">API
   &#160;<span id="projectnumber">0.9.8</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_c_p_application_8j_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">CPApplication.j</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_c_p_application_8j.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * CPApplication.j</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * AppKit</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * Created by Francisco Tolmasky.</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * Copyright 2008, 280 North, Inc.</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * This library is free software; you can redistribute it and/or</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * modify it under the terms of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * License as published by the Free Software Foundation; either</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * version 2.1 of the License, or (at your option) any later version.</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * This library is distributed in the hope that it will be useful,</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * Lesser General Public License for more details.</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * You should have received a copy of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * License along with this library; if not, write to the Free Software</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;@<span class="keyword">typedef</span> CPModalSession</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div>
<div class="line"><a name="l00027"></a><span class="lineno"><a class="code" href="_c_p_application_8j.html#a47a511c66b117b9ae3071f1505ad2225">   27</a></span>&#160;var <a class="code" href="_c_p_application_8j.html#a47a511c66b117b9ae3071f1505ad2225">CPMainCibFile</a>               = <span class="stringliteral">@&quot;CPMainCibFile&quot;</span>,</div>
<div class="line"><a name="l00028"></a><span class="lineno"><a class="code" href="_c_p_application_8j.html#a4537e2b2d65b5851464abc8f68819af2">   28</a></span>&#160;    <a class="code" href="_c_p_application_8j.html#a4537e2b2d65b5851464abc8f68819af2">CPMainCibFileHumanFriendly</a>  = <span class="stringliteral">@&quot;Main cib file base name&quot;</span>,</div>
<div class="line"><a name="l00029"></a><span class="lineno"><a class="code" href="_c_p_application_8j.html#a2a6140d6a9d8a55a56913d76c5f8bda3">   29</a></span>&#160;    <a class="code" href="_c_p_application_8j.html#a2a6140d6a9d8a55a56913d76c5f8bda3">CPEventModifierFlags</a> = 0;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div>
<div class="line"><a name="l00032"></a><span class="lineno"><a class="code" href="protocol_c_p_application_delegate-p.html">   32</a></span>&#160;<span class="keyword">@protocol </span><a class="code" href="protocol_c_p_application_delegate-p.html">CPApplicationDelegate</a> &lt;<a class="code" href="class_c_p_object.html">CPObject</a>&gt;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="keyword">@optional</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;- (void)applicationDidBecomeActive:(<a class="code" href="interface_c_p_notification.html" title="A notification that can be posted to a CPNotificationCenter. ">CPNotification</a>)aNotification;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;- (void)applicationDidChangeScreenParameters:(<a class="code" href="interface_c_p_notification.html" title="A notification that can be posted to a CPNotificationCenter. ">CPNotification</a>)aNotification;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;- (void)applicationDidFinishLaunching:(<a class="code" href="interface_c_p_notification.html" title="A notification that can be posted to a CPNotificationCenter. ">CPNotification</a>)aNotification;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;- (void)applicationDidResignActive:(<a class="code" href="interface_c_p_notification.html" title="A notification that can be posted to a CPNotificationCenter. ">CPNotification</a>)aNotification;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;- (void)applicationWillBecomeActive:(<a class="code" href="interface_c_p_notification.html" title="A notification that can be posted to a CPNotificationCenter. ">CPNotification</a>)aNotification;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;- (void)applicationWillFinishLaunching:(<a class="code" href="interface_c_p_notification.html" title="A notification that can be posted to a CPNotificationCenter. ">CPNotification</a>)aNotification;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;- (void)applicationWillResignActive:(<a class="code" href="interface_c_p_notification.html" title="A notification that can be posted to a CPNotificationCenter. ">CPNotification</a>)aNotification;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;- (void)applicationWillTerminate:(<a class="code" href="interface_c_p_notification.html" title="A notification that can be posted to a CPNotificationCenter. ">CPNotification</a>)aNotification;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="keyword">@end</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="keyword">@implementation </span><a class="code" href="interface_c_p_application.html">CPApplication</a> : <a class="code" href="interface_c_p_responder.html">CPResponder</a></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;{</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    CPArray                     _eventListeners;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="keywordtype">int</span>                         _eventListenerInsertionIndex;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <a class="code" href="interface_c_p_event.html">CPEvent</a>                     _currentEvent;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <a class="code" href="interface_c_p_window.html">CPWindow</a>                    _lastMouseMoveWindow;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    CPArray                     _windows;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <a class="code" href="interface_c_p_window.html">CPWindow</a>                    _keyWindow;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <a class="code" href="interface_c_p_window.html">CPWindow</a>                    _mainWindow;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <a class="code" href="interface_c_p_window.html">CPWindow</a>                    _previousKeyWindow;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <a class="code" href="interface_c_p_window.html">CPWindow</a>                    _previousMainWindow;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <a class="code" href="interface_c_p_document_controller.html">CPDocumentController</a>        _documentController;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    CPModalSession              _currentSession;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    id &lt;CPApplicationDelegate&gt;  _delegate;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    BOOL                        _finishedLaunching;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    BOOL                        _isActive;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <a class="code" href="interface_c_p_dictionary.html" title="A mutable key-value pair collection. ">CPDictionary</a>                _namedArgs;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    CPArray                     _args;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <a class="code" href="interface_c_p_string.html" title="An immutable string (collection of characters). ">CPString</a>                    _fullArgsString;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <a class="code" href="interface_c_p_image.html">CPImage</a>                     _applicationIconImage;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <a class="code" href="interface_c_p_panel.html">CPPanel</a>                     _aboutPanel;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <a class="code" href="interface_c_p_theme_blend.html">CPThemeBlend</a>                _themeBlend;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;}</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div>
<div class="line"><a name="l00109"></a><span class="lineno"><a class="code" href="interface_c_p_application.html#a8c693ac0ab3482fffedb5bf2b73b41d0">  109</a></span>&#160;+ (<a class="code" href="interface_c_p_application.html">CPApplication</a>)sharedApplication</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;{</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="_c_p_application___constants_8j.html#a428912231c07effc32c420ee523bf0b7">CPApp</a>)</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        <a class="code" href="_c_p_application___constants_8j.html#a428912231c07effc32c420ee523bf0b7">CPApp</a> = [[<a class="code" href="interface_c_p_application.html">CPApplication</a> <a class="code" href="class_c_p_object.html#aa6d290852c6a151058e8e82d053db475">alloc</a>] init];</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="_c_p_application___constants_8j.html#a428912231c07effc32c420ee523bf0b7">CPApp</a>;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;}</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div>
<div class="line"><a name="l00122"></a><span class="lineno"><a class="code" href="interface_c_p_application.html#ac8a601e39081348dda300a6b587143dd">  122</a></span>&#160;- (id)<a class="code" href="_c_a_layer_8j.html#a4213bb26f5207ee3f402fe463badc691">init</a></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;{</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="keyword">self</span> = [<span class="keyword">super</span> <a class="code" href="class_c_p_object.html#a3082d56109c1b84cf4e7ac6fde8200c9">init</a>];</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <a class="code" href="_c_p_application___constants_8j.html#a428912231c07effc32c420ee523bf0b7">CPApp</a> = <span class="keyword">self</span>;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">self</span>)</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    {</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        _eventListeners = [];</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        _eventListenerInsertionIndex = 0;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        _windows = [[<a class="code" href="interface_c_p_null.html" title="An object representation of nil. ">CPNull</a> <a class="code" href="interface_c_p_null.html#a589123ee618828f2e89a5776409e1592">null</a>]];</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    }</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">self</span>;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;}</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">// Configuring Applications</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div>
<div class="line"><a name="l00147"></a><span class="lineno"><a class="code" href="interface_c_p_application.html#aa98d1570df7894e46c64ffe6348faf94">  147</a></span>&#160;- (void)setDelegate:(<span class="keywordtype">id</span> &lt;<a class="code" href="protocol_c_p_application_delegate-p.html">CPApplicationDelegate</a>&gt;)aDelegate</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;{</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">if</span> (_delegate == aDelegate)</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    var defaultCenter = [<a class="code" href="interface_c_p_notification_center.html" title="Sends messages (CPNotification) between objects. ">CPNotificationCenter</a> <a class="code" href="interface_c_p_notification_center.html#a5abe725f1a1a48ac4cb1e45b6d9d50a8">defaultCenter</a>],</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        delegateNotifications =</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        [</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;            CPApplicationWillFinishLaunchingNotification, @selector(applicationWillFinishLaunching:),</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;            CPApplicationDidFinishLaunchingNotification, @selector(applicationDidFinishLaunching:),</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            CPApplicationWillBecomeActiveNotification, @selector(applicationWillBecomeActive:),</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            CPApplicationDidBecomeActiveNotification, @selector(applicationDidBecomeActive:),</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;            CPApplicationWillResignActiveNotification, @selector(applicationWillResignActive:),</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;            CPApplicationDidResignActiveNotification, @selector(applicationDidResignActive:),</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;            CPApplicationWillTerminateNotification, @selector(applicationWillTerminate:),</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;            CPApplicationDidChangeScreenParametersNotification, @selector(applicationDidChangeScreenParameters:)</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        ],</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        count = [delegateNotifications count];</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keywordflow">if</span> (_delegate)</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    {</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        var index = 0;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <span class="keywordflow">for</span> (; index &lt; count; index += 2)</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        {</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;            var notificationName = delegateNotifications[index],</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                selector = delegateNotifications[index + 1];</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            <span class="keywordflow">if</span> ([_delegate respondsToSelector:selector])</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                [defaultCenter removeObserver:_delegate name:notificationName object:self];</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        }</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    }</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    _delegate = aDelegate;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    var index = 0;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keywordflow">for</span> (; index &lt; count; index += 2)</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    {</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        var notificationName = delegateNotifications[index],</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            selector = delegateNotifications[index + 1];</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <span class="keywordflow">if</span> ([_delegate respondsToSelector:selector])</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            [defaultCenter addObserver:_delegate selector:selector name:notificationName object:self];</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    }</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;}</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div>
<div class="line"><a name="l00197"></a><span class="lineno"><a class="code" href="interface_c_p_application.html#a1c966409a519de0d397e3eea715a21c1">  197</a></span>&#160;- (id)<a class="code" href="_c_a_layer_8j.html#a6c98e239b6ba279cfc95c64db9de555c">delegate</a></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;{</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordflow">return</span> _delegate;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;}</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div>
<div class="line"><a name="l00208"></a><span class="lineno"><a class="code" href="interface_c_p_application.html#aabd18048a6bf76a1d2a2055a4833021f">  208</a></span>&#160;- (void)finishLaunching</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;{</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="comment">// At this point we clear the window.status to eliminate Safari&#39;s &quot;Cancelled&quot; error message</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="comment">// The message shouldn&#39;t be displayed, because only an XHR is cancelled, but it is a usability issue.</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="comment">// We do it here so that applications can change it in willFinish or didFinishLaunching</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="preprocessor">#if PLATFORM(DOM)</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="preprocessor"></span>    window.status = <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="comment">// We also want to set the default cursor on the body, so that buttons and things don&#39;t have an iBeam</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    [[<a class="code" href="interface_c_p_cursor.html">CPCursor</a> <a class="code" href="interface_c_p_cursor.html#ac201dc3f01c6d2f58e7dfc53a932f0aa">arrowCursor</a>] <a class="code" href="interface_c_p_cursor.html#a6617eeea2bcccabd49bd0dc960ebbd30">set</a>];</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    var bundle = [<a class="code" href="interface_c_p_bundle.html">CPBundle</a> <a class="code" href="interface_c_p_bundle.html#a2f1b74bb845caded5d4d8a1309c7ff0e">mainBundle</a>],</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        delegateClassName = [bundle objectForInfoDictionaryKey:@&quot;CPApplicationDelegateClass&quot;];</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordflow">if</span> (delegateClassName)</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    {</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        var delegateClass = objj_getClass(delegateClassName);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        <span class="keywordflow">if</span> (delegateClass)</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;            [<span class="keyword">self</span> <a class="code" href="interface_c_p_application.html#aa98d1570df7894e46c64ffe6348faf94">setDelegate</a>:[[delegateClass alloc] init]];</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    }</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    var defaultCenter = [<a class="code" href="interface_c_p_notification_center.html" title="Sends messages (CPNotification) between objects. ">CPNotificationCenter</a> <a class="code" href="interface_c_p_notification_center.html#a5abe725f1a1a48ac4cb1e45b6d9d50a8">defaultCenter</a>];</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    [defaultCenter</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        postNotificationName:CPApplicationWillFinishLaunchingNotification</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        object:self];</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    var types = [bundle objectForInfoDictionaryKey:@&quot;CPBundleDocumentTypes&quot;];</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="keywordflow">if</span> ([types count] &gt; 0)</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        _documentController = [<a class="code" href="interface_c_p_document_controller.html">CPDocumentController</a> <a class="code" href="interface_c_p_document_controller.html#a1ec9d50f14afbee7cb3331494378f2dc">sharedDocumentController</a>];</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    var needsUntitled = !!_documentController,</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        URLStrings = nil;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="preprocessor">#if PLATFORM(DOM)</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="preprocessor"></span>    URLStrings = window.cpOpeningURLStrings &amp;&amp; window.cpOpeningURLStrings();</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    var index = 0,</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        count = [URLStrings count];</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordflow">for</span> (; index &lt; count; ++index)</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        needsUntitled = ![<span class="keyword">self</span> _openURL:[<a class="code" href="interface_c_p_u_r_l.html">CPURL</a> URLWithString:URLStrings[index]]] &amp;&amp; needsUntitled;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="keywordflow">if</span> (needsUntitled &amp;&amp; [_delegate respondsToSelector:<span class="keyword">@selector</span>(applicationShouldOpenUntitledFile:)])</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        needsUntitled = [_delegate applicationShouldOpenUntitledFile:self];</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keywordflow">if</span> (needsUntitled)</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        [_documentController newDocument:self];</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    [_documentController _updateRecentDocumentsMenu];</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    [defaultCenter</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        postNotificationName:CPApplicationDidFinishLaunchingNotification</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        object:self];</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    [[<a class="code" href="interface_c_p_run_loop.html" title="The main run loop for the application. ">CPRunLoop</a> <a class="code" href="interface_c_p_run_loop.html#aba93f1cef957bad4353ce060981c0b9d">currentRunLoop</a>] <a class="code" href="interface_c_p_run_loop.html#aad8e51e44d4c17634d8c45c1ca540217">limitDateForMode</a>:CPDefaultRunLoopMode];</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    _finishedLaunching = YES;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;}</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div>
<div class="line"><a name="l00272"></a><span class="lineno"><a class="code" href="interface_c_p_application.html#a0a0360dcc5041732959b89ab73823aa0">  272</a></span>&#160;- (void)terminate:(<span class="keywordtype">id</span>)aSender</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;{</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    [[<a class="code" href="interface_c_p_notification_center.html" title="Sends messages (CPNotification) between objects. ">CPNotificationCenter</a> <a class="code" href="interface_c_p_notification_center.html#a5abe725f1a1a48ac4cb1e45b6d9d50a8">defaultCenter</a>]</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <a class="code" href="interface_c_p_notification_center.html#ac9402b295db607cbd92ae56bce50b37f">postNotificationName</a>:CPApplicationWillTerminateNotification</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                      <a class="code" href="interface_c_p_notification_center.html#ac9402b295db607cbd92ae56bce50b37f">object</a>:self];</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="keywordflow">if</span> (![<a class="code" href="interface_c_p_platform.html">CPPlatform</a> isBrowser])</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    {</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        [[<a class="code" href="interface_c_p_document_controller.html">CPDocumentController</a> <a class="code" href="interface_c_p_document_controller.html#a1ec9d50f14afbee7cb3331494378f2dc">sharedDocumentController</a>] closeAllDocumentsWithDelegate:self</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                                                                  didCloseAllSelector:@selector(_documentController:didCloseAll:context:)</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                                                                          contextInfo:nil];</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    }</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    {</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        [[[<span class="keyword">self</span> <a class="code" href="interface_c_p_application.html#aefbfc6fff8ebf370f9068768b425ef64">keyWindow</a>] <a class="code" href="interface_c_p_window.html#a0aefd4e1b2119ed015fcf990b3f167b5">platformWindow</a>] _propagateCurrentDOMEvent:YES];</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    }</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;}</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;</div>
<div class="line"><a name="l00296"></a><span class="lineno"><a class="code" href="interface_c_p_application.html#af0fae94f1273f19e425d5760685d4aa6">  296</a></span>&#160;- (void)setApplicationIconImage:(<a class="code" href="interface_c_p_image.html">CPImage</a>)anImage</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;{</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    _applicationIconImage = anImage;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;}</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;</div>
<div class="line"><a name="l00305"></a><span class="lineno"><a class="code" href="interface_c_p_application.html#a1d641a277c7086ce45dd050986da138b">  305</a></span>&#160;- (<a class="code" href="interface_c_p_image.html">CPImage</a>)applicationIconImage</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;{</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="keywordflow">if</span> (_applicationIconImage)</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        <span class="keywordflow">return</span> _applicationIconImage;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    var imagePath = [[<a class="code" href="interface_c_p_bundle.html">CPBundle</a> <a class="code" href="interface_c_p_bundle.html#a2f1b74bb845caded5d4d8a1309c7ff0e">mainBundle</a>] <a class="code" href="interface_c_p_bundle.html#ac6c5a6f04de1fbb5d99c08f689e1ae6e">objectForInfoDictionaryKey</a>:@&quot;CPApplicationIcon&quot;];</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="keywordflow">if</span> (imagePath)</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        _applicationIconImage = [[<a class="code" href="interface_c_p_image.html">CPImage</a> <a class="code" href="class_c_p_object.html#aa6d290852c6a151058e8e82d053db475">alloc</a>] <a class="code" href="interface_c_p_image.html#a5a7837974a1c2b25652d8e8ba6fb5c46">initWithContentsOfFile</a>:imagePath];</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="keywordflow">return</span> _applicationIconImage;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;}</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div>
<div class="line"><a name="l00320"></a><span class="lineno"><a class="code" href="interface_c_p_application.html#aab6f2282e1a683839b9a1c9f67cfa741">  320</a></span>&#160;- (void)orderFrontStandardAboutPanel:(<span class="keywordtype">id</span>)sender</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;{</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    [<span class="keyword">self</span> <a class="code" href="interface_c_p_application.html#ab0c8e3975d4f5a8f30c6c5da0f459839">orderFrontStandardAboutPanelWithOptions</a>:nil];</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;}</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;</div>
<div class="line"><a name="l00349"></a><span class="lineno"><a class="code" href="interface_c_p_application.html#ab0c8e3975d4f5a8f30c6c5da0f459839">  349</a></span>&#160;- (void)orderFrontStandardAboutPanelWithOptions:(<a class="code" href="interface_c_p_dictionary.html" title="A mutable key-value pair collection. ">CPDictionary</a>)options</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;{</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="keywordflow">if</span> (!_aboutPanel)</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    {</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        var mainInfo = [[<a class="code" href="interface_c_p_bundle.html">CPBundle</a> <a class="code" href="interface_c_p_bundle.html#a2f1b74bb845caded5d4d8a1309c7ff0e">mainBundle</a>] <a class="code" href="interface_c_p_bundle.html#a7eeee327b653d8e0b1b67e1236d83227">infoDictionary</a>],</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;            applicationTitle = [options <a class="code" href="interface_c_p_dictionary.html#a3c517acf439ab37a112456000fea7a9b">objectForKey</a>:&quot;ApplicationName&quot;] || [mainInfo objectForKey:@&quot;CPBundleName&quot;],</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;            applicationIcon = [options <a class="code" href="interface_c_p_dictionary.html#a3c517acf439ab37a112456000fea7a9b">objectForKey</a>:@&quot;ApplicationIcon&quot;] || [<span class="keyword">self</span> <a class="code" href="interface_c_p_application.html#a1d641a277c7086ce45dd050986da138b">applicationIconImage</a>],</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;            version = [options <a class="code" href="interface_c_p_dictionary.html#a3c517acf439ab37a112456000fea7a9b">objectForKey</a>:@&quot;Version&quot;] || [mainInfo objectForKey:@&quot;CPBundleVersion&quot;],</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;            applicationVersion = [options <a class="code" href="interface_c_p_dictionary.html#a3c517acf439ab37a112456000fea7a9b">objectForKey</a>:@&quot;ApplicationVersion&quot;] || [mainInfo objectForKey:@&quot;CPBundleShortVersionString&quot;],</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;            copyright = [options <a class="code" href="interface_c_p_dictionary.html#a3c517acf439ab37a112456000fea7a9b">objectForKey</a>:@&quot;Copyright&quot;] || [mainInfo objectForKey:@&quot;CPHumanReadableCopyright&quot;];</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        var windowWidth = 275,</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;            windowHeight = 223,</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;            imgWidth = 100,</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;            imgHeight = 100,</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;            interField = 8,</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;            aboutPanel = [[<a class="code" href="interface_c_p_window.html">CPWindow</a> <a class="code" href="class_c_p_object.html#aa6d290852c6a151058e8e82d053db475">alloc</a>] <a class="code" href="interface_c_p_window.html#af546a342c978228b46be25675abd42d4">initWithContentRect</a>:CGRectMake(0, 0, windowWidth, windowHeight) <a class="code" href="interface_c_p_window.html#af546a342c978228b46be25675abd42d4">styleMask</a>:CPClosableWindowMask],</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            imageView = [[<a class="code" href="interface_c_p_image_view.html">CPImageView</a> <a class="code" href="class_c_p_object.html#aa6d290852c6a151058e8e82d053db475">alloc</a>] initWithFrame:CGRectMake((windowWidth / 2) - (imgWidth / 2), interField, imgWidth, imgHeight)],</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;            applicationLabel = [[<a class="code" href="interface_c_p_text_field.html">CPTextField</a> <a class="code" href="class_c_p_object.html#aa6d290852c6a151058e8e82d053db475">alloc</a>] initWithFrame:CGRectMake(17, imgHeight + 16, windowWidth - 34, 24)],</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;            versionLabel = [[<a class="code" href="interface_c_p_text_field.html">CPTextField</a> <a class="code" href="class_c_p_object.html#aa6d290852c6a151058e8e82d053db475">alloc</a>] initWithFrame:CGRectMake(17, imgHeight + 48, windowWidth - 34, 16)],</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;            copyrightLabel = [[<a class="code" href="interface_c_p_text_field.html">CPTextField</a> <a class="code" href="class_c_p_object.html#aa6d290852c6a151058e8e82d053db475">alloc</a>] initWithFrame:CGRectMake(17, imgHeight + 72, windowWidth - 34, 32)],</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;            contentView = [aboutPanel contentView];</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        [applicationLabel setFont:[<a class="code" href="interface_c_p_font.html">CPFont</a> <a class="code" href="interface_c_p_font.html#ac327fc231b12558933066ec1d61cb06b">boldSystemFontOfSize</a>:[<a class="code" href="interface_c_p_font.html">CPFont</a> <a class="code" href="interface_c_p_font.html#aa75216be1d606dd75d5a49fcdf088ab4">systemFontSize</a>] + 2]];</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        [applicationLabel setAlignment:CPCenterTextAlignment];</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        [versionLabel setFont:[<a class="code" href="interface_c_p_font.html">CPFont</a> <a class="code" href="interface_c_p_font.html#a22d3861b4ab8b1d330139743553ef102">systemFontOfSize</a>:[<a class="code" href="interface_c_p_font.html">CPFont</a> <a class="code" href="interface_c_p_font.html#aa75216be1d606dd75d5a49fcdf088ab4">systemFontSize</a>] - 1]];</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        [versionLabel setAlignment:CPCenterTextAlignment];</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        [copyrightLabel setFont:[<a class="code" href="interface_c_p_font.html">CPFont</a> <a class="code" href="interface_c_p_font.html#a22d3861b4ab8b1d330139743553ef102">systemFontOfSize</a>:[<a class="code" href="interface_c_p_font.html">CPFont</a> <a class="code" href="interface_c_p_font.html#aa75216be1d606dd75d5a49fcdf088ab4">systemFontSize</a>] - 1]];</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        [copyrightLabel setAlignment:CPCenterTextAlignment];</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        [copyrightLabel setLineBreakMode:CPLineBreakByWordWrapping];</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        [contentView addSubview:imageView];</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        [contentView addSubview:applicationLabel];</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        [contentView addSubview:versionLabel];</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        [contentView addSubview:copyrightLabel];</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        var standardPath = [[<a class="code" href="interface_c_p_bundle.html">CPBundle</a> <a class="code" href="interface_c_p_bundle.html#a6b2401dce4d84d49261126169d966567">bundleForClass</a>:[<span class="keyword">self</span> <a class="code" href="class_c_p_object.html#a9995454d4b902a69bfd12c5c3035ce83">class</a>]] <a class="code" href="interface_c_p_bundle.html#a09f6fb5fbe8e49ca2577b82af1c3ffa2">pathForResource</a>:@&quot;standardApplicationIcon.png&quot;];</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        [imageView setImage:applicationIcon || [[<a class="code" href="interface_c_p_image.html">CPImage</a> <a class="code" href="class_c_p_object.html#aa6d290852c6a151058e8e82d053db475">alloc</a>] <a class="code" href="interface_c_p_image.html#ab4a0e81ccf9e4234c8c907fdfdae1329">initWithContentsOfFile</a>:standardPath</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                                                                                  <a class="code" href="interface_c_p_image.html#ab4a0e81ccf9e4234c8c907fdfdae1329">size</a>:CGSizeMake(256, 256)]];</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        [applicationLabel setStringValue:applicationTitle || &quot;&quot;];</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        <span class="keywordflow">if</span> (applicationVersion &amp;&amp; version)</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;            [versionLabel setStringValue:@&quot;Version &quot; + applicationVersion + &quot; (&quot; + version + &quot;)&quot;];</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (applicationVersion || version)</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;            [versionLabel setStringValue:@&quot;Version &quot; + (applicationVersion || version)];</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;            [versionLabel setStringValue:@&quot;&quot;];</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        [copyrightLabel setStringValue:copyright || @&quot;&quot;];</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        [aboutPanel center];</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        _aboutPanel = aboutPanel;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    }</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    [_aboutPanel orderFront:self];</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;}</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;- (void)_documentController:(<a class="code" href="interface_c_p_document_controller.html">CPDocumentController</a>)docController didCloseAll:(BOOL)didCloseAll context:(Object)info</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;{</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="comment">// callback method for terminate:</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <span class="keywordflow">if</span> (didCloseAll)</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    {</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        <span class="keywordflow">if</span> ([_delegate respondsToSelector:<span class="keyword">@selector</span>(applicationShouldTerminate:)])</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;            [<span class="keyword">self</span> replyToApplicationShouldTerminate:[_delegate applicationShouldTerminate:self]];</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;            [<span class="keyword">self</span> replyToApplicationShouldTerminate:YES];</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    }</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;}</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;</div>
<div class="line"><a name="l00421"></a><span class="lineno"><a class="code" href="interface_c_p_application.html#abc53b1971bd5ffa8aa370efe34147d2c">  421</a></span>&#160;- (void)replyToApplicationShouldTerminate:(BOOL)terminate</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;{</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="keywordflow">if</span> (terminate == <a class="code" href="_c_p_application___constants_8j.html#a0bca35cb292f7c58d4a3cbd28fa8d775">CPTerminateNow</a>)</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    {</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        [[<a class="code" href="interface_c_p_notification_center.html" title="Sends messages (CPNotification) between objects. ">CPNotificationCenter</a> <a class="code" href="interface_c_p_notification_center.html#a5abe725f1a1a48ac4cb1e45b6d9d50a8">defaultCenter</a>] <a class="code" href="interface_c_p_notification_center.html#ac9402b295db607cbd92ae56bce50b37f">postNotificationName</a>:CPApplicationWillTerminateNotification <a class="code" href="interface_c_p_notification_center.html#ac9402b295db607cbd92ae56bce50b37f">object</a>:self];</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        [<a class="code" href="interface_c_p_platform.html">CPPlatform</a> <a class="code" href="interface_c_p_base_platform.html#a81efaae37a0d29a0d4a8dc58c6a72462">terminateApplication</a>];</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    }</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;}</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;</div>
<div class="line"><a name="l00430"></a><span class="lineno"><a class="code" href="interface_c_p_application.html#a27b4fca842111d6c60b3bfafb598d76f">  430</a></span>&#160;- (void)activateIgnoringOtherApps:(BOOL)shouldIgnoreOtherApps</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;{</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    [<span class="keyword">self</span> _willBecomeActive];</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    [<a class="code" href="interface_c_p_platform.html">CPPlatform</a> <a class="code" href="interface_c_p_base_platform.html#af97b4b58683cc40769ddbd8cfeaf1e1f">activateIgnoringOtherApps</a>:shouldIgnoreOtherApps];</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    _isActive = YES;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    [<span class="keyword">self</span> _didBecomeActive];</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;}</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;</div>
<div class="line"><a name="l00440"></a><span class="lineno"><a class="code" href="interface_c_p_application.html#a4d71728aa45c25f945266073a4ee48c0">  440</a></span>&#160;- (void)deactivate</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;{</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    [<span class="keyword">self</span> _willResignActive];</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    [<a class="code" href="interface_c_p_platform.html">CPPlatform</a> <a class="code" href="interface_c_p_base_platform.html#a20c6f620e909ed4216c009f0f1dc2a23">deactivate</a>];</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    _isActive = NO;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    [<span class="keyword">self</span> _didResignActive];</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;}</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;</div>
<div class="line"><a name="l00450"></a><span class="lineno"><a class="code" href="interface_c_p_application.html#a8ebdc9f815c76092aa3767d222ef9365">  450</a></span>&#160;- (void)isActive</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;{</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="keywordflow">return</span> _isActive;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;}</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;</div>
<div class="line"><a name="l00455"></a><span class="lineno"><a class="code" href="interface_c_p_application.html#ab72e536b06fb461d27967aa05306d296">  455</a></span>&#160;- (void)hideOtherApplications:(<span class="keywordtype">id</span>)aSender</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;{</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    [<a class="code" href="interface_c_p_platform.html">CPPlatform</a> <a class="code" href="interface_c_p_base_platform.html#aa284e453b2739da8318baba60f0eef19">hideOtherApplications</a>:self];</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;}</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;</div>
<div class="line"><a name="l00464"></a><span class="lineno"><a class="code" href="interface_c_p_application.html#af5cf04567055fed004821bbc686fd2c9">  464</a></span>&#160;- (void)run</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;{</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    [<span class="keyword">self</span> <a class="code" href="interface_c_p_application.html#aabd18048a6bf76a1d2a2055a4833021f">finishLaunching</a>];</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;}</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="comment">// Managing the Event Loop</span></div>
<div class="line"><a name="l00474"></a><span class="lineno"><a class="code" href="interface_c_p_application.html#a85adc5c0222f22c1904cb69cdc26dcd3">  474</a></span>&#160;<span class="comment"></span>- (void)runModalForWindow:(<a class="code" href="interface_c_p_window.html">CPWindow</a>)aWindow</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;{</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    [<span class="keyword">self</span> <a class="code" href="interface_c_p_application.html#a22ef58082cfd3859c014bc9b70c99a59">runModalSession</a>:[<span class="keyword">self</span> <a class="code" href="interface_c_p_application.html#adbd97312cdd6eb4fdb4062c1370e2c3d">beginModalSessionForWindow</a>:aWindow]];</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;}</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;</div>
<div class="line"><a name="l00484"></a><span class="lineno"><a class="code" href="interface_c_p_application.html#ac786816520c0b4688c04de7de90cc552">  484</a></span>&#160;- (void)stopModalWithCode:(<span class="keywordtype">int</span>)aCode</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;{</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="keywordflow">if</span> (!_currentSession)</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    {</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        <span class="comment">// raise exception;</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    }</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    _currentSession._state = aCode;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    _currentSession = _currentSession._previous;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;<span class="comment">//    if (aCode == CPRunAbortedResponse)</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        [<span class="keyword">self</span> _removeRunModalLoop];</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;}</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;<span class="comment">/* @ignore */</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;- (void)_removeRunModalLoop</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;{</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    var count = _eventListeners.length;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="keywordflow">while</span> (count--)</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        <span class="keywordflow">if</span> (_eventListeners[count]._callback === _CPRunModalLoop)</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        {</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;            _eventListeners.splice(count, 1);</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;            <span class="keywordflow">if</span> (count &lt;= _eventListenerInsertionIndex)</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;                _eventListenerInsertionIndex--;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        }</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;}</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;</div>
<div class="line"><a name="l00518"></a><span class="lineno"><a class="code" href="interface_c_p_application.html#a51cf4783853a5aabc6e0b7405ffa1b40">  518</a></span>&#160;- (void)stopModal</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;{</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    [<span class="keyword">self</span> <a class="code" href="interface_c_p_application.html#ac786816520c0b4688c04de7de90cc552">stopModalWithCode</a>:CPRunStoppedResponse]</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;}</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;</div>
<div class="line"><a name="l00526"></a><span class="lineno"><a class="code" href="interface_c_p_application.html#a5de37d9b56b947c490470d29cd797572">  526</a></span>&#160;- (void)abortModal</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;{</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    [<span class="keyword">self</span> <a class="code" href="interface_c_p_application.html#ac786816520c0b4688c04de7de90cc552">stopModalWithCode</a>:CPRunAbortedResponse];</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;}</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div>
<div class="line"><a name="l00535"></a><span class="lineno"><a class="code" href="interface_c_p_application.html#adbd97312cdd6eb4fdb4062c1370e2c3d">  535</a></span>&#160;- (CPModalSession)beginModalSessionForWindow:(<a class="code" href="interface_c_p_window.html">CPWindow</a>)aWindow</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;{</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <span class="keywordflow">return</span> _CPModalSessionMake(aWindow, 0);</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;}</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;</div>
<div class="line"><a name="l00544"></a><span class="lineno"><a class="code" href="interface_c_p_application.html#a22ef58082cfd3859c014bc9b70c99a59">  544</a></span>&#160;- (void)runModalSession:(CPModalSession)aModalSession</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;{</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    aModalSession._previous = _currentSession;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    _currentSession = aModalSession;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    var theWindow = aModalSession._window;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    [theWindow center];</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    [theWindow makeKeyWindow];</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    [theWindow orderFront:self];</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="comment">//    [theWindow._bridge _obscureWindowsBelowModalWindow];</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    [CPApp setCallback:_CPRunModalLoop forNextEventMatchingMask:CPAnyEventMask untilDate:nil inMode:0 dequeue:YES];</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;}</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;</div>
<div class="line"><a name="l00564"></a><span class="lineno"><a class="code" href="interface_c_p_application.html#ac971ace68940c8e6d8c3d682f6f36e1e">  564</a></span>&#160;- (<a class="code" href="interface_c_p_window.html">CPWindow</a>)modalWindow</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;{</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    <span class="keywordflow">if</span> (!_currentSession)</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        <span class="keywordflow">return</span> nil;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    <span class="keywordflow">return</span> _currentSession._window;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;}</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;<span class="comment">/* @ignore */</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;- (BOOL)_handleKeyEquivalent:(<a class="code" href="interface_c_p_event.html">CPEvent</a>)anEvent</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;{</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <span class="keywordflow">return</span> [[<span class="keyword">self</span> keyWindow] performKeyEquivalent:anEvent] ||</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;           [[<span class="keyword">self</span> mainMenu] performKeyEquivalent:anEvent];</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;}</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;</div>
<div class="line"><a name="l00583"></a><span class="lineno"><a class="code" href="interface_c_p_application.html#a33244ff9a51187288d16978dcf8d7a5b">  583</a></span>&#160;- (void)sendEvent:(<a class="code" href="interface_c_p_event.html">CPEvent</a>)anEvent</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;{</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    _currentEvent = anEvent;</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <a class="code" href="_c_p_application_8j.html#a2a6140d6a9d8a55a56913d76c5f8bda3">CPEventModifierFlags</a> = [anEvent <a class="code" href="interface_c_p_event.html#ae1990580a2f73b19009f30f27ff1e396">modifierFlags</a>];</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    var theWindow = [anEvent <a class="code" href="interface_c_p_event.html#af9a0e45bbaba9bc6587a222e74bf0703">window</a>];</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="comment">// Check if this is a candidate for key equivalent...</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <span class="keywordflow">if</span> ([anEvent _couldBeKeyEquivalent] &amp;&amp; [<span class="keyword">self</span> _handleKeyEquivalent:anEvent])</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        <span class="comment">// The key equivalent was handled.</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="keywordflow">if</span> ([anEvent type] == <a class="code" href="_c_p_event___constants_8j.html#a5bdb3919044bdb124c16292b9e50f615">CPMouseMoved</a>)</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    {</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        <span class="keywordflow">if</span> (theWindow !== _lastMouseMoveWindow)</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;            [_lastMouseMoveWindow _mouseExitedResizeRect];</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        _lastMouseMoveWindow = theWindow;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    }</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;<span class="comment">        Event listeners are processed from back to front so that newer event listeners normally take</span></div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;<span class="comment">        precedence. If during the execution of a callback a new event listener is added, it should</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;<span class="comment">        be inserted after the current callback but before any higher priority callbacks. This makes</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;<span class="comment">        repeating event listeners (those that reinsert themselves) stable relative to each other.</span></div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    <span class="keywordflow">for</span> (var i = _eventListeners.length - 1; i &gt;= 0; i--)</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    {</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        var listener = _eventListeners[i];</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;        <span class="keywordflow">if</span> (listener._mask &amp; (1 &lt;&lt; [anEvent type]))</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;        {</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;            _eventListeners.splice(i, 1);</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;            <span class="comment">// In case the callback wants to add more listeners.</span></div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;            _eventListenerInsertionIndex = i;</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;            listener._callback(anEvent);</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;            <span class="keywordflow">if</span> (listener._dequeue)</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;            {</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;                <span class="comment">// Don&#39;t process the event normally and don&#39;t send it to any other listener.</span></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;                _eventListenerInsertionIndex = _eventListeners.length;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;            }</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;        }</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    }</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    _eventListenerInsertionIndex = _eventListeners.length;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <span class="keywordflow">if</span> (theWindow)</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;        [theWindow sendEvent:anEvent];</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;}</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;</div>
<div class="line"><a name="l00639"></a><span class="lineno"><a class="code" href="interface_c_p_application.html#a6a957e658f52298ed4be0b2947e5a305">  639</a></span>&#160;- (void)doCommandBySelector:(<span class="keywordtype">SEL</span>)aSelector</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;{</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    <span class="keywordflow">if</span> ([_delegate respondsToSelector:aSelector])</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;        [_delegate performSelector:aSelector];</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;        [<span class="keyword">super</span> <a class="code" href="interface_c_p_responder.html#aa7486f25921d4f7d452dde0cf144733f">doCommandBySelector</a>:aSelector];</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;}</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;</div>
<div class="line"><a name="l00650"></a><span class="lineno"><a class="code" href="interface_c_p_application.html#aefbfc6fff8ebf370f9068768b425ef64">  650</a></span>&#160;- (<a class="code" href="interface_c_p_window.html">CPWindow</a>)keyWindow</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;{</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <span class="keywordflow">return</span> _keyWindow;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;}</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;</div>
<div class="line"><a name="l00658"></a><span class="lineno"><a class="code" href="interface_c_p_application.html#a82298586a4cb9effd5233cb77a7f7890">  658</a></span>&#160;- (<a class="code" href="interface_c_p_window.html">CPWindow</a>)mainWindow</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;{</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    <span class="keywordflow">return</span> _mainWindow;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;}</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;</div>
<div class="line"><a name="l00666"></a><span class="lineno"><a class="code" href="interface_c_p_application.html#a45a9d9ed2eef9a37c2d0fdb9712e4763">  666</a></span>&#160;- (<a class="code" href="interface_c_p_window.html">CPWindow</a>)windowWithWindowNumber:(<span class="keywordtype">int</span>)aWindowNumber</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;{</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    <span class="comment">// Never allow _windows[0] to be returned - it&#39;s an internal CPNull placeholder.</span></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="keywordflow">if</span> (!aWindowNumber)</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;        <span class="keywordflow">return</span> nil;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    <span class="keywordflow">return</span> _windows[aWindowNumber];</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;}</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;</div>
<div class="line"><a name="l00678"></a><span class="lineno"><a class="code" href="interface_c_p_application.html#aaa026d0853cf005eab04246ed7e79438">  678</a></span>&#160;- (CPArray)windows</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;{</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    <span class="comment">// Return all windows, but not the CPNull placeholder in _windows[0].</span></div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    <span class="keywordflow">return</span> [_windows subarrayWithRange:CPMakeRange(1, [_windows count] - 1)];</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;}</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;</div>
<div class="line"><a name="l00687"></a><span class="lineno"><a class="code" href="interface_c_p_application.html#a9fca8520493ec5b87f960a7c5633c4f6">  687</a></span>&#160;- (CPArray)orderedWindows</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;{</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;<span class="preprocessor">#if PLATFORM(DOM)</span></div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;<span class="preprocessor"></span>    <span class="keywordflow">return</span> CPWindowObjectList();</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;<span class="preprocessor"></span>    <span class="keywordflow">return</span> [];</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;<span class="preprocessor"></span>}</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;</div>
<div class="line"><a name="l00696"></a><span class="lineno"><a class="code" href="interface_c_p_application.html#ac7b611292495b21d5853da5c56a7b753">  696</a></span>&#160;- (void)hide:(<span class="keywordtype">id</span>)aSender</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;{</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    [<a class="code" href="interface_c_p_platform.html">CPPlatform</a> <a class="code" href="interface_c_p_base_platform.html#a34fa37bf47af304c347dec377bab0c43">hide</a>:self];</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;}</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;<span class="comment">// Accessing the Main Menu</span></div>
<div class="line"><a name="l00705"></a><span class="lineno"><a class="code" href="interface_c_p_application.html#a0240f30e337334ea7582cc35cf16d10b">  705</a></span>&#160;<span class="comment"></span>- (<a class="code" href="interface_c_p_menu.html">CPMenu</a>)mainMenu</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;{</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    <span class="keywordflow">return</span> [<span class="keyword">self</span> <a class="code" href="interface_c_p_responder.html#a50017b84c82bccc0cd7e3db10be63bc6">menu</a>];</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;}</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;</div>
<div class="line"><a name="l00714"></a><span class="lineno"><a class="code" href="interface_c_p_application.html#aa02c3292decf1ede9eb7aa722c185e0e">  714</a></span>&#160;- (void)setMainMenu:(<a class="code" href="interface_c_p_menu.html">CPMenu</a>)aMenu</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;{</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    [<span class="keyword">self</span> <a class="code" href="interface_c_p_application.html#a8cb1f435c9f152aef9387c08c41f2dc9">setMenu</a>:aMenu];</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;}</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;</div>
<div class="line"><a name="l00719"></a><span class="lineno"><a class="code" href="interface_c_p_application.html#a8cb1f435c9f152aef9387c08c41f2dc9">  719</a></span>&#160;- (void)setMenu:(<a class="code" href="interface_c_p_menu.html">CPMenu</a>)aMenu</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;{</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    <span class="keywordflow">if</span> ([aMenu _menuName] === <span class="stringliteral">&quot;CPMainMenu&quot;</span>)</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    {</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;        <span class="keywordflow">if</span> ([<span class="keyword">self</span> <a class="code" href="_c_p_segmented_control_8j.html#a013c594489b43812712541b68420b137">menu</a>] === aMenu)</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;        [<span class="keyword">super</span> <a class="code" href="interface_c_p_responder.html#ad5e2efcaaf475c412b862d6e6f5a1530">setMenu</a>:aMenu];</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;        <span class="keywordflow">if</span> ([<a class="code" href="interface_c_p_platform.html">CPPlatform</a> supportsNativeMainMenu])</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;            window.cpSetMainMenu([<span class="keyword">self</span> <a class="code" href="_c_p_segmented_control_8j.html#a013c594489b43812712541b68420b137">menu</a>]);</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    }</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;        [aMenu _setMenuName:@&quot;CPMainMenu&quot;];</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;}</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;</div>
<div class="line"><a name="l00739"></a><span class="lineno"><a class="code" href="interface_c_p_application.html#ad3a49169269faa705fd7caa9ae061b44">  739</a></span>&#160;- (void)orderFrontColorPanel:(<span class="keywordtype">id</span>)aSender</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;{</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    [[<a class="code" href="interface_c_p_color_panel.html">CPColorPanel</a> <a class="code" href="interface_c_p_color_panel.html#aef25bee4d3031443cf89a0d596c62c4a">sharedColorPanel</a>] <a class="code" href="interface_c_p_color_panel.html#a7a18cfa51769a9dfb67d9a4efbe13797">orderFront</a>:self];</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;}</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;<span class="comment">// Posting Actions</span></div>
<div class="line"><a name="l00754"></a><span class="lineno"><a class="code" href="interface_c_p_application.html#a3cce6c2fcff5a29193ebb11f11166ec0">  754</a></span>&#160;<span class="comment"></span>- (BOOL)tryToPerform:(<span class="keywordtype">SEL</span>)anAction with:(<span class="keywordtype">id</span>)anObject</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;{</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    <span class="keywordflow">if</span> (!anAction)</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;        <span class="keywordflow">return</span> NO;</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    <span class="keywordflow">if</span> ([super tryToPerform:anAction with:anObject])</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;        <span class="keywordflow">return</span> YES;</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    <span class="keywordflow">if</span> ([_delegate respondsToSelector:anAction])</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    {</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;        [_delegate performSelector:anAction withObject:anObject];</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;        <span class="keywordflow">return</span> YES;</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    }</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    <span class="keywordflow">return</span> NO;</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;}</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;</div>
<div class="line"><a name="l00779"></a><span class="lineno"><a class="code" href="interface_c_p_application.html#afa28b85bd18f1401bc020646b7a4af77">  779</a></span>&#160;- (BOOL)sendAction:(<span class="keywordtype">SEL</span>)anAction to:(<span class="keywordtype">id</span>)aTarget from:(<span class="keywordtype">id</span>)aSender</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;{</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    var target = [<span class="keyword">self</span> <a class="code" href="interface_c_p_application.html#a5df4007e388d7b9fd3cd75e505005b8e">targetForAction</a>:anAction <a class="code" href="interface_c_p_application.html#a5df4007e388d7b9fd3cd75e505005b8e">to</a>:aTarget <a class="code" href="interface_c_p_application.html#a5df4007e388d7b9fd3cd75e505005b8e">from</a>:aSender];</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    <span class="keywordflow">if</span> (!target)</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;        <span class="keywordflow">return</span> NO;</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    [target performSelector:anAction withObject:aSender];</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    <span class="keywordflow">return</span> YES;</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;}</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;</div>
<div class="line"><a name="l00802"></a><span class="lineno"><a class="code" href="interface_c_p_application.html#a5df4007e388d7b9fd3cd75e505005b8e">  802</a></span>&#160;- (id)targetForAction:(<span class="keywordtype">SEL</span>)anAction to:(<span class="keywordtype">id</span>)aTarget from:(<span class="keywordtype">id</span>)aSender</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;{</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    <span class="keywordflow">if</span> (!anAction)</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;        <span class="keywordflow">return</span> nil;</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    <span class="keywordflow">if</span> (aTarget)</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;        <span class="keywordflow">return</span> aTarget;</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    <span class="keywordflow">return</span> [<span class="keyword">self</span> <a class="code" href="interface_c_p_application.html#afc93c59b6cf45c21c238c20b9a4761ca">targetForAction</a>:anAction];</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;}</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;- (id)_targetForWindow:(<a class="code" href="interface_c_p_window.html">CPWindow</a>)aWindow action:(<span class="keywordtype">SEL</span>)anAction</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;{</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    var responder = [aWindow <a class="code" href="interface_c_p_window.html#ae3af926d15fa7e76e98f18e2797ea345">firstResponder</a>],</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;        checkWindow = YES;</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    <span class="keywordflow">while</span> (responder)</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    {</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;        <span class="keywordflow">if</span> ([responder respondsToSelector:anAction])</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;            <span class="keywordflow">return</span> responder;</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;        <span class="keywordflow">if</span> (responder == aWindow)</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;            checkWindow = NO;</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;        responder = [responder nextResponder];</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    }</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    <span class="keywordflow">if</span> (checkWindow &amp;&amp; [aWindow respondsToSelector:anAction])</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;        <span class="keywordflow">return</span> aWindow;</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    var <a class="code" href="_c_a_layer_8j.html#a6c98e239b6ba279cfc95c64db9de555c">delegate</a> = [aWindow <a class="code" href="interface_c_p_window.html#a8622589fd16eef8183794a3702d687fa">delegate</a>];</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    <span class="keywordflow">if</span> ([delegate respondsToSelector:anAction])</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="_c_a_layer_8j.html#a6c98e239b6ba279cfc95c64db9de555c">delegate</a>;</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    var windowController = [aWindow <a class="code" href="interface_c_p_window.html#a4e0b69f32847e5eb911065d2e8ecdd40">windowController</a>];</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    <span class="keywordflow">if</span> ([windowController respondsToSelector:anAction])</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;        <span class="keywordflow">return</span> windowController;</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    var theDocument = [windowController document];</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    <span class="keywordflow">if</span> (theDocument !== delegate &amp;&amp; [theDocument respondsToSelector:anAction])</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;        <span class="keywordflow">return</span> theDocument;</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    <span class="keywordflow">return</span> nil;</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;}</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;</div>
<div class="line"><a name="l00880"></a><span class="lineno"><a class="code" href="interface_c_p_application.html#afc93c59b6cf45c21c238c20b9a4761ca">  880</a></span>&#160;- (id)targetForAction:(<span class="keywordtype">SEL</span>)anAction</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;{</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    <span class="keywordflow">if</span> (!anAction)</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;        <span class="keywordflow">return</span> nil;</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    var target = [<span class="keyword">self</span> _targetForWindow:[<span class="keyword">self</span> <a class="code" href="interface_c_p_application.html#aefbfc6fff8ebf370f9068768b425ef64">keyWindow</a>] action:anAction];</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    <span class="keywordflow">if</span> (target)</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;        <span class="keywordflow">return</span> target;</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    target = [<span class="keyword">self</span> _targetForWindow:[<span class="keyword">self</span> <a class="code" href="interface_c_p_application.html#a82298586a4cb9effd5233cb77a7f7890">mainWindow</a>] action:anAction];</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    <span class="keywordflow">if</span> (target)</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;        <span class="keywordflow">return</span> target;</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;    <span class="keywordflow">if</span> ([<span class="keyword">self</span> respondsToSelector:anAction])</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">self</span>;</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    <span class="keywordflow">if</span> ([_delegate respondsToSelector:anAction])</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;        <span class="keywordflow">return</span> _delegate;</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    <span class="keywordflow">if</span> ([_documentController respondsToSelector:anAction])</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;        <span class="keywordflow">return</span> _documentController;</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    <span class="keywordflow">return</span> nil;</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;}</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;</div>
<div class="line"><a name="l00922"></a><span class="lineno"><a class="code" href="interface_c_p_application.html#ad12daff8a7157ed9560d4a5ccd439c99">  922</a></span>&#160;- (void)setCallback:(Function)aCallback forNextEventMatchingMask:(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)aMask untilDate:(<a class="code" href="interface_c_p_date.html" title="A representation of a single point in time. ">CPDate</a>)anExpiration inMode:(<a class="code" href="interface_c_p_string.html" title="An immutable string (collection of characters). ">CPString</a>)aMode dequeue:(BOOL)shouldDequeue</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;{</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    _eventListeners.splice(_eventListenerInsertionIndex++, 0, _CPEventListenerMake(aMask, aCallback, shouldDequeue));</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;}</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;</div>
<div class="line"><a name="l00944"></a><span class="lineno"><a class="code" href="interface_c_p_application.html#ad940fdb48bdcd1c019bd374a80ce3aed">  944</a></span>&#160;- (void)setTarget:(<span class="keywordtype">id</span>)aTarget selector:(<span class="keywordtype">SEL</span>)aSelector forNextEventMatchingMask:(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)aMask untilDate:(<a class="code" href="interface_c_p_date.html" title="A representation of a single point in time. ">CPDate</a>)anExpiration inMode:(<a class="code" href="interface_c_p_string.html" title="An immutable string (collection of characters). ">CPString</a>)aMode dequeue:(BOOL)shouldDequeue</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;{</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    _eventListeners.splice(_eventListenerInsertionIndex++, 0, _CPEventListenerMake(aMask, <span class="keyword">function</span> (anEvent) { objj_msgSend(aTarget, aSelector, anEvent); }, shouldDequeue));</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;}</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;</div>
<div class="line"><a name="l00952"></a><span class="lineno"><a class="code" href="interface_c_p_application.html#ac90486574b8eee8743f0989932558eec">  952</a></span>&#160;- (<a class="code" href="interface_c_p_event.html">CPEvent</a>)currentEvent</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;{</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;    <span class="keywordflow">return</span> _currentEvent;</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;}</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;<span class="comment">// Managing Sheets</span></div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;</div>
<div class="line"><a name="l00967"></a><span class="lineno"><a class="code" href="interface_c_p_application.html#a278ab72f2ed545bddf8ef4f0fd0631ed">  967</a></span>&#160;- (void)beginSheet:(<a class="code" href="interface_c_p_window.html">CPWindow</a>)aSheet modalForWindow:(<a class="code" href="interface_c_p_window.html">CPWindow</a>)aWindow modalDelegate:(<span class="keywordtype">id</span>)aModalDelegate didEndSelector:(<span class="keywordtype">SEL</span>)didEndSelector contextInfo:(<span class="keywordtype">id</span>)contextInfo</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;{</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;    <span class="keywordflow">if</span> ([aWindow isSheet])</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    {</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;        [<a class="code" href="interface_c_p_exception.html" title="Used to implement exception handling (creating &amp; raising). ">CPException</a> <a class="code" href="interface_c_p_exception.html#ac8f34bd11868822e26a7b952810128b8">raise</a>:CPInternalInconsistencyException <a class="code" href="interface_c_p_exception.html#ac8f34bd11868822e26a7b952810128b8">reason</a>:@&quot;The target window of beginSheet: cannot be a sheet&quot;];</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;    }</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    <span class="keywordflow">if</span> (![aWindow attachedSheet])</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;        [aSheet._windowView _enableSheet:YES inWindow:aWindow];</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    [aWindow _attachSheet:aSheet modalDelegate:aModalDelegate didEndSelector:didEndSelector contextInfo:contextInfo];</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;}</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;</div>
<div class="line"><a name="l00994"></a><span class="lineno"><a class="code" href="interface_c_p_application.html#a84e6eee84846443d87c5aa6c9ea470bd">  994</a></span>&#160;- (void)endSheet:(<a class="code" href="interface_c_p_window.html">CPWindow</a>)sheet returnCode:(<span class="keywordtype">int</span>)returnCode</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;{</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    var count = [_windows count];</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    <span class="keywordflow">while</span> (--count &gt;= 0)</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;    {</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;        var aWindow = [_windows objectAtIndex:count],</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;            context = aWindow._sheetContext;</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;        <span class="keywordflow">if</span> (context &amp;&amp; context[<span class="stringliteral">&quot;sheet&quot;</span>] === sheet)</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;        {</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;            context[&quot;returnCode&quot;] = returnCode;</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;            [aWindow _endSheet];</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;        }</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;    }</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;}</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;</div>
<div class="line"><a name="l01016"></a><span class="lineno"><a class="code" href="interface_c_p_application.html#a6cf7a768b8f090974762536f1d81508a"> 1016</a></span>&#160;- (void)endSheet:(<a class="code" href="interface_c_p_window.html">CPWindow</a>)sheet</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;{</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    <span class="comment">// FIX ME: this is wrong: by Cocoa this should be: CPRunStoppedResponse.</span></div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;   [<span class="keyword">self</span> <a class="code" href="interface_c_p_application.html#a84e6eee84846443d87c5aa6c9ea470bd">endSheet</a>:sheet <a class="code" href="interface_c_p_application.html#a84e6eee84846443d87c5aa6c9ea470bd">returnCode</a>:0];</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;}</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;</div>
<div class="line"><a name="l01037"></a><span class="lineno"><a class="code" href="interface_c_p_application.html#ab40595ed4a9f55ce1d28460cdb20151a"> 1037</a></span>&#160;- (CPArray)arguments</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;{</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;    <span class="comment">// FIXME This should probably not access the window object #if !PLATFORM(DOM), but the unit tests rely on it.</span></div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    <span class="keywordflow">if</span> (window &amp;&amp; window.location &amp;&amp; _fullArgsString !== window.location.<a class="code" href="class_c_p_object.html#a559330c10056835f8c4476344e651412">hash</a>)</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;        [<span class="keyword">self</span> _reloadArguments];</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    <span class="keywordflow">return</span> _args;</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;}</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;</div>
<div class="line"><a name="l01062"></a><span class="lineno"><a class="code" href="interface_c_p_application.html#a3bfebc72220105bc7fe4e366d3140317"> 1062</a></span>&#160;- (void)setArguments:(CPArray)args</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;{</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    <span class="keywordflow">if</span> (!args || args.length == 0)</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    {</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;        _args = [];</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;        <span class="comment">// Don&#39;t use if PLATFORM(DOM) here - the unit test fakes window.location so we should play along.</span></div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;        <span class="keywordflow">if</span> (window &amp;&amp; window.location)</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;            window.location.hash = <span class="stringliteral">@&quot;#&quot;</span>;</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;    }</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;    <span class="keywordflow">if</span> (![args isKindOfClass:CPArray])</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;        args = [CPArray arrayWithObject:args];</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;    _args = args;</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    var toEncode = [_args copy];</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    <span class="keywordflow">for</span> (var i = 0, count = toEncode.length; i &lt; count; i++)</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;        toEncode[i] = encodeURIComponent(toEncode[i]);</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    var hash = [toEncode componentsJoinedByString:@&quot;/&quot;];</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;    <span class="comment">// Don&#39;t use if PLATFORM(DOM) here - the unit test fakes window.location so we should play along.</span></div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;    <span class="keywordflow">if</span> (window &amp;&amp; window.location)</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;        window.location.hash = <span class="stringliteral">@&quot;#&quot;</span> + hash;</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;}</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;- (void)_reloadArguments</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;{</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    <span class="comment">// FIXME This should probably not access the window object #if !PLATFORM(DOM), but the unit tests rely on it.</span></div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    _fullArgsString = (window &amp;&amp; window.location) ? window.location.<a class="code" href="class_c_p_object.html#a559330c10056835f8c4476344e651412">hash</a> : <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;    <a class="code" href="_c_a_backing_store_8j.html#ad2b049b1f6911d2ffffc0769dfe601e4">if</a> (_fullArgsString.<a class="code" href="interface_c_p_string.html#a995ca4d2f7167db0da2fad02a444ec73">length</a>)</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    {</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;        var args = _fullArgsString.substring(1).split(<span class="stringliteral">&quot;/&quot;</span>);</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;        <span class="keywordflow">for</span> (var i = 0, count = args.length; i &lt; count; i++)</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;            args[i] = decodeURIComponent(args[i]);</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;        _args = args;</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;    }</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;        _args = [];</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;}</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;</div>
<div class="line"><a name="l01124"></a><span class="lineno"><a class="code" href="interface_c_p_application.html#a01befc8c46bddc243e6681723aaeb70c"> 1124</a></span>&#160;- (<a class="code" href="interface_c_p_dictionary.html" title="A mutable key-value pair collection. ">CPDictionary</a>)namedArguments</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;{</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    <span class="keywordflow">return</span> _namedArgs;</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;}</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;- (BOOL)_openURL:(<a class="code" href="interface_c_p_u_r_l.html">CPURL</a>)aURL</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;{</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;    <span class="keywordflow">if</span> (_delegate &amp;&amp; [_delegate respondsToSelector:<span class="keyword">@selector</span>(application:openFile:)])</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;    {</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;        CPLog.warn(<span class="stringliteral">&quot;application:openFile: is deprecated, use application:openURL: instead.&quot;</span>);</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;        <span class="keywordflow">return</span> [_delegate application:self openFile:[aURL <a class="code" href="interface_c_p_u_r_l.html#ad2ccd2a9c907f4376793a04cc9c6562d">absoluteString</a>]];</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;    }</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    <span class="keywordflow">if</span> (_delegate &amp;&amp; [_delegate respondsToSelector:<span class="keyword">@selector</span>(application:openURL:)])</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;        <span class="keywordflow">return</span> [_delegate application:self openURL:aURL];</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;    <span class="keywordflow">return</span> !![_documentController openDocumentWithContentsOfURL:aURL display:YES error:NULL];</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;}</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;- (void)_willBecomeActive</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;{</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    [[<a class="code" href="interface_c_p_notification_center.html" title="Sends messages (CPNotification) between objects. ">CPNotificationCenter</a> <a class="code" href="interface_c_p_notification_center.html#a5abe725f1a1a48ac4cb1e45b6d9d50a8">defaultCenter</a>] <a class="code" href="interface_c_p_notification_center.html#ac5e7dc8d0972292f52736f6f662bb25a">postNotificationName</a>:CPApplicationWillBecomeActiveNotification</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;                                                        <a class="code" href="interface_c_p_notification_center.html#ac5e7dc8d0972292f52736f6f662bb25a">object</a>:self</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;                                                      <a class="code" href="interface_c_p_notification_center.html#ac5e7dc8d0972292f52736f6f662bb25a">userInfo</a>:nil];</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;}</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;- (void)_didBecomeActive</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;{</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;    <span class="keywordflow">if</span> (![<span class="keyword">self</span> keyWindow] &amp;&amp; _previousKeyWindow &amp;&amp;</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;        [[<span class="keyword">self</span> windows] indexOfObjectIdenticalTo:_previousKeyWindow] !== <a class="code" href="_c_p_obj_j_runtime_8j.html#a84e3be579b365cc2c1559e1a1f469238">CPNotFound</a>)</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;        [_previousKeyWindow makeKeyWindow];</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;    <span class="keywordflow">if</span> (![<span class="keyword">self</span> mainWindow] &amp;&amp; _previousMainWindow &amp;&amp;</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;        [[<span class="keyword">self</span> windows] indexOfObjectIdenticalTo:_previousMainWindow] !== <a class="code" href="_c_p_obj_j_runtime_8j.html#a84e3be579b365cc2c1559e1a1f469238">CPNotFound</a>)</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;        [_previousMainWindow makeMainWindow];</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    <span class="keywordflow">if</span> ([<span class="keyword">self</span> keyWindow])</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;        [[<span class="keyword">self</span> keyWindow] orderFront:self];</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ([<span class="keyword">self</span> mainWindow])</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;        [[<span class="keyword">self</span> mainWindow] makeKeyAndOrderFront:self];</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ([<span class="keyword">self</span> mainMenu])</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;        [[<span class="keyword">self</span> mainMenu]._menuWindow makeKeyWindow]; <span class="comment">//FIXME this may not actually work</span></div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;    _previousKeyWindow = nil;</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;    _previousMainWindow = nil;</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;    [[<a class="code" href="interface_c_p_notification_center.html" title="Sends messages (CPNotification) between objects. ">CPNotificationCenter</a> <a class="code" href="interface_c_p_notification_center.html#a5abe725f1a1a48ac4cb1e45b6d9d50a8">defaultCenter</a>] <a class="code" href="interface_c_p_notification_center.html#ac5e7dc8d0972292f52736f6f662bb25a">postNotificationName</a>:CPApplicationDidBecomeActiveNotification</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;                                                        <a class="code" href="interface_c_p_notification_center.html#ac5e7dc8d0972292f52736f6f662bb25a">object</a>:self</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;                                                      <a class="code" href="interface_c_p_notification_center.html#ac5e7dc8d0972292f52736f6f662bb25a">userInfo</a>:nil];</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;}</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;- (void)_willResignActive</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;{</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;    [[<a class="code" href="interface_c_p_notification_center.html" title="Sends messages (CPNotification) between objects. ">CPNotificationCenter</a> <a class="code" href="interface_c_p_notification_center.html#a5abe725f1a1a48ac4cb1e45b6d9d50a8">defaultCenter</a>] <a class="code" href="interface_c_p_notification_center.html#ac5e7dc8d0972292f52736f6f662bb25a">postNotificationName</a>:CPApplicationWillResignActiveNotification</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;                                                        <a class="code" href="interface_c_p_notification_center.html#ac5e7dc8d0972292f52736f6f662bb25a">object</a>:self</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;                                                      <a class="code" href="interface_c_p_notification_center.html#ac5e7dc8d0972292f52736f6f662bb25a">userInfo</a>:nil];</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;}</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;- (void)_didResignActive</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;{</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">self</span>._activeMenu)</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;        [<span class="keyword">self</span>._activeMenu cancelTracking];</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    <span class="keywordflow">if</span> ([<span class="keyword">self</span> keyWindow])</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;    {</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;        _previousKeyWindow = [<span class="keyword">self</span> keyWindow];</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;        [_previousKeyWindow resignKeyWindow];</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;    }</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;    <span class="keywordflow">if</span> ([<span class="keyword">self</span> mainWindow])</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;    {</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;        _previousMainWindow = [<span class="keyword">self</span> mainWindow];</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;        [_previousMainWindow resignMainWindow];</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;    }</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;    [[<a class="code" href="interface_c_p_notification_center.html" title="Sends messages (CPNotification) between objects. ">CPNotificationCenter</a> <a class="code" href="interface_c_p_notification_center.html#a5abe725f1a1a48ac4cb1e45b6d9d50a8">defaultCenter</a>] <a class="code" href="interface_c_p_notification_center.html#ac5e7dc8d0972292f52736f6f662bb25a">postNotificationName</a>:CPApplicationDidResignActiveNotification</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;                                                        <a class="code" href="interface_c_p_notification_center.html#ac5e7dc8d0972292f52736f6f662bb25a">object</a>:self</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;                                                      <a class="code" href="interface_c_p_notification_center.html#ac5e7dc8d0972292f52736f6f662bb25a">userInfo</a>:nil];</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;}</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;</div>
<div class="line"><a name="l01204"></a><span class="lineno"><a class="code" href="interface_c_p_application.html#a6120f451aea00fbd4284d4137de5cc17"> 1204</a></span>&#160;+ (<a class="code" href="interface_c_p_string.html" title="An immutable string (collection of characters). ">CPString</a>)defaultThemeName</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;{</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    <span class="keywordflow">return</span> ([[<a class="code" href="interface_c_p_bundle.html">CPBundle</a> mainBundle] objectForInfoDictionaryKey:<span class="stringliteral">&quot;CPDefaultTheme&quot;</span>] || <span class="stringliteral">@&quot;Aristo2&quot;</span>);</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;}</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;<span class="keyword">@end</span></div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;var _CPModalSessionMake = <span class="keyword">function</span>(aWindow, aStopCode)</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;{</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;    <span class="keywordflow">return</span> { _window:aWindow, _state:<a class="code" href="_c_p_application___constants_8j.html#a26c5f833094fa3e4f82261f5e2ad4bff">CPRunContinuesResponse</a> , _previous:nil };</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;};</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;var _CPEventListenerMake = <span class="keyword">function</span>(anEventMask, aCallback, shouldDequeue)</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;{</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;    <span class="keywordflow">return</span> { _mask:anEventMask, _callback:aCallback, _dequeue:shouldDequeue };</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;};</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;<span class="comment">// Make this a global for use in CPPlatformWindow+DOM.j.</span></div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;_CPRunModalLoop = <span class="keyword">function</span>(anEvent)</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;{</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    [CPApp setCallback:_CPRunModalLoop forNextEventMatchingMask:CPAnyEventMask untilDate:nil inMode:0 dequeue:YES];</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    var theWindow = [anEvent <a class="code" href="interface_c_p_event.html#af9a0e45bbaba9bc6587a222e74bf0703">window</a>],</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;        modalSession = <a class="code" href="_c_p_application___constants_8j.html#a428912231c07effc32c420ee523bf0b7">CPApp</a>._currentSession;</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;<span class="comment">        The special case for popovers here is not clear. In Cocoa the popover window does not respond YES to worksWhenModal, yet it works when there is a modal window. Maybe it starts its own modal session, but interaction with the original modal window seems to continue working as well. Regardless of correctness, this solution beats popovers not working at all from sheets.</span></div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    <span class="keywordflow">if</span> (theWindow == modalSession._window ||</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;        [theWindow worksWhenModal] ||</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;        [theWindow attachedSheet] == modalSession._window || <span class="comment">// -dw- allow modal parent of sheet to be repositioned</span></div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;        ([theWindow isKindOfClass:_CPPopoverWindow] &amp;&amp; [[theWindow targetView] window] === modalSession._window))</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    {</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;        [theWindow sendEvent:anEvent];</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;    }</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;};</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;</div>
<div class="line"><a name="l01247"></a><span class="lineno"><a class="code" href="_c_p_application_8j.html#aae5e1099a43f5271c33d0f1e2e813a7a"> 1247</a></span>&#160;<span class="keyword">function</span> <a class="code" href="_c_p_application_8j.html#aae5e1099a43f5271c33d0f1e2e813a7a">CPApplicationMain</a>(args, namedArgs)</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;{</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;<span class="preprocessor">#if PLATFORM(DOM)</span></div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;<span class="preprocessor"></span>    <span class="comment">// hook to allow recorder, etc to manipulate things before starting AppKit</span></div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;    <span class="keywordflow">if</span> (window.parent !== window &amp;&amp; typeof window.parent._childAppIsStarting === <span class="stringliteral">&quot;function&quot;</span>)</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;    {</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;        <span class="keywordflow">try</span></div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;        {</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;            window.parent._childAppIsStarting(window);</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;        }</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;        <span class="keywordflow">catch</span>(err)</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;        {</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;            <span class="comment">// This could happen if we&#39;re in an iframe without access to the parent frame.</span></div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;            CPLog.warn(<span class="stringliteral">&quot;Failed to call parent frame&#39;s _childAppIsStarting().&quot;</span>);</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;        }</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;    }</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;    var mainBundle = [<a class="code" href="interface_c_p_bundle.html">CPBundle</a> <a class="code" href="interface_c_p_bundle.html#a2f1b74bb845caded5d4d8a1309c7ff0e">mainBundle</a>],</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;        principalClass = [mainBundle principalClass];</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;    <span class="keywordflow">if</span> (!principalClass)</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;        principalClass = [<a class="code" href="interface_c_p_application.html">CPApplication</a> <a class="code" href="class_c_p_object.html#a9995454d4b902a69bfd12c5c3035ce83">class</a>];</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;    [principalClass sharedApplication];</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;    <span class="keywordflow">if</span> ([args containsObject:<span class="stringliteral">&quot;debug&quot;</span>])</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;        CPLogRegister(CPLogPopup);</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;    <a class="code" href="_c_p_application___constants_8j.html#a428912231c07effc32c420ee523bf0b7">CPApp</a>._args = args;</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;    <a class="code" href="_c_p_application___constants_8j.html#a428912231c07effc32c420ee523bf0b7">CPApp</a>._namedArgs = namedArgs;</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;    [_CPAppBootstrapper performActions];</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;}</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;var _CPAppBootstrapperActions = nil;</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;<span class="keyword">@implementation </span>_CPAppBootstrapper : <a class="code" href="class_c_p_object.html">CPObject</a></div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;{</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    <span class="keywordtype">id</span> __doxygen__;</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;}</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;+ (CPArray)actions</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;{</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;    <span class="keywordflow">return</span> [@selector(bootstrapPlatform), @selector(loadDefaultTheme), @selector(loadMainCibFile)];</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;}</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;+ (void)performActions</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;{</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;    <span class="keywordflow">if</span> (!_CPAppBootstrapperActions)</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;        _CPAppBootstrapperActions = [<span class="keyword">self</span> actions];</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;    <span class="keywordflow">while</span> (_CPAppBootstrapperActions.length)</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;    {</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;        var action = _CPAppBootstrapperActions.shift();</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;        <span class="keywordflow">if</span> (objj_msgSend(<span class="keyword">self</span>, action))</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;    }</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;    [CPApp run];</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;}</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;+ (BOOL)bootstrapPlatform</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;{</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;    <span class="keywordflow">return</span> [<a class="code" href="interface_c_p_platform.html">CPPlatform</a> <a class="code" href="interface_c_p_base_platform.html#a3d7e776c092c7e2be487f49e97bc4db0">bootstrap</a>];</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;}</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;+ (BOOL)loadDefaultTheme</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;{</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;    var defaultThemeName = [<a class="code" href="interface_c_p_application.html">CPApplication</a> <a class="code" href="interface_c_p_application.html#a6120f451aea00fbd4284d4137de5cc17">defaultThemeName</a>],</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;        themeURL = nil;</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;    <span class="keywordflow">if</span> (defaultThemeName === <span class="stringliteral">@&quot;Aristo&quot;</span> || defaultThemeName === <span class="stringliteral">@&quot;Aristo2&quot;</span>)</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;        themeURL = [[<a class="code" href="interface_c_p_bundle.html">CPBundle</a> <a class="code" href="interface_c_p_bundle.html#a6b2401dce4d84d49261126169d966567">bundleForClass</a>:[<a class="code" href="interface_c_p_application.html">CPApplication</a> <a class="code" href="class_c_p_object.html#a9995454d4b902a69bfd12c5c3035ce83">class</a>]] <a class="code" href="interface_c_p_bundle.html#a09f6fb5fbe8e49ca2577b82af1c3ffa2">pathForResource</a>:defaultThemeName + @&quot;.blend&quot;];</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;        themeURL = [[<a class="code" href="interface_c_p_bundle.html">CPBundle</a> <a class="code" href="interface_c_p_bundle.html#a2f1b74bb845caded5d4d8a1309c7ff0e">mainBundle</a>] <a class="code" href="interface_c_p_bundle.html#a09f6fb5fbe8e49ca2577b82af1c3ffa2">pathForResource</a>:defaultThemeName + @&quot;.blend&quot;];</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;    var blend = [[<a class="code" href="interface_c_p_theme_blend.html">CPThemeBlend</a> <a class="code" href="class_c_p_object.html#aa6d290852c6a151058e8e82d053db475">alloc</a>] initWithContentsOfURL:themeURL];</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;    [blend loadWithDelegate:self];</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;    <span class="keywordflow">return</span> YES;</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;}</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;+ (void)blendDidFinishLoading:(<a class="code" href="interface_c_p_theme_blend.html">CPThemeBlend</a>)aThemeBlend</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;{</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;    [[<a class="code" href="interface_c_p_application.html">CPApplication</a> <a class="code" href="interface_c_p_application.html#a8c693ac0ab3482fffedb5bf2b73b41d0">sharedApplication</a>] <a class="code" href="interface_c_p_application.html#a471125ab727bce08a3417e0ab65ad680">setThemeBlend</a>:aThemeBlend];</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;    [<a class="code" href="interface_c_p_theme.html">CPTheme</a> <a class="code" href="interface_c_p_theme.html#ab235720defa46dd77e93581aae14842d">setDefaultTheme</a>:[<a class="code" href="interface_c_p_theme.html">CPTheme</a> <a class="code" href="interface_c_p_theme.html#a1fa892cba378f23063a7be7c1704ae38">themeNamed</a>:[<a class="code" href="interface_c_p_application.html">CPApplication</a> <a class="code" href="interface_c_p_application.html#a6120f451aea00fbd4284d4137de5cc17">defaultThemeName</a>]]];</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;    [<span class="keyword">self</span> performActions];</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;}</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;+ (BOOL)loadMainCibFile</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;{</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;    var mainBundle = [<a class="code" href="interface_c_p_bundle.html">CPBundle</a> <a class="code" href="interface_c_p_bundle.html#a2f1b74bb845caded5d4d8a1309c7ff0e">mainBundle</a>],</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;        mainCibFile = [mainBundle objectForInfoDictionaryKey:CPMainCibFile] || [mainBundle objectForInfoDictionaryKey:CPMainCibFileHumanFriendly];</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;    <span class="keywordflow">if</span> (mainCibFile)</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;    {</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;        [mainBundle loadCibFile:mainCibFile</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;              externalNameTable:@{ CPCibOwner: CPApp }</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;                   loadDelegate:self];</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;        <span class="keywordflow">return</span> YES;</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;    }</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;        [<span class="keyword">self</span> loadCiblessBrowserMainMenu];</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;    <span class="keywordflow">return</span> NO;</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;}</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;+ (void)loadCiblessBrowserMainMenu</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;{</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;    var mainMenu = [[<a class="code" href="interface_c_p_menu.html">CPMenu</a> <a class="code" href="class_c_p_object.html#aa6d290852c6a151058e8e82d053db475">alloc</a>] <a class="code" href="interface_c_p_menu.html#a61eba957d564edf0ac0c9de21ea2e5c4">initWithTitle</a>:@&quot;MainMenu&quot;];</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;    <span class="comment">// FIXME: We should implement autoenabling.</span></div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;    [mainMenu setAutoenablesItems:NO];</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;    var newMenuItem = [[<a class="code" href="interface_c_p_menu_item.html">CPMenuItem</a> <a class="code" href="class_c_p_object.html#aa6d290852c6a151058e8e82d053db475">alloc</a>] <a class="code" href="interface_c_p_menu_item.html#a758d300e466e19c73646ffdff4e11750">initWithTitle</a>:@&quot;New&quot; <a class="code" href="interface_c_p_menu_item.html#a758d300e466e19c73646ffdff4e11750">action</a>:@selector(<a class="code" href="interface_c_p_menu_item.html#a758d300e466e19c73646ffdff4e11750">newDocument</a>:) <a class="code" href="interface_c_p_menu_item.html#a758d300e466e19c73646ffdff4e11750">keyEquivalent</a>:@&quot;n&quot;];</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;    [newMenuItem setImage:[[<a class="code" href="interface_c_p_theme.html">CPTheme</a> <a class="code" href="interface_c_p_theme.html#a19028d2f26f8d89be574ebdbdcfa5f16">defaultTheme</a>] <a class="code" href="interface_c_p_theme.html#acba903ceab7f3fa7cfd7d4de137cc5d4">valueForAttributeWithName</a>:@&quot;menu-general-icon-new&quot; <a class="code" href="interface_c_p_theme.html#acba903ceab7f3fa7cfd7d4de137cc5d4">forClass</a>:_CPMenuView]];</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;    [newMenuItem setAlternateImage:[[<a class="code" href="interface_c_p_theme.html">CPTheme</a> <a class="code" href="interface_c_p_theme.html#a19028d2f26f8d89be574ebdbdcfa5f16">defaultTheme</a>] <a class="code" href="interface_c_p_theme.html#a5dbd6b53455ad8cf5850c5389dc4628d">valueForAttributeWithName</a>:@&quot;menu-general-icon-new&quot; <a class="code" href="interface_c_p_theme.html#a5dbd6b53455ad8cf5850c5389dc4628d">inState</a>:CPThemeStateHighlighted <a class="code" href="interface_c_p_theme.html#a5dbd6b53455ad8cf5850c5389dc4628d">forClass</a>:_CPMenuView]];</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;    [mainMenu addItem:newMenuItem];</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;    var openMenuItem = [[<a class="code" href="interface_c_p_menu_item.html">CPMenuItem</a> <a class="code" href="class_c_p_object.html#aa6d290852c6a151058e8e82d053db475">alloc</a>] <a class="code" href="interface_c_p_menu_item.html#a758d300e466e19c73646ffdff4e11750">initWithTitle</a>:@&quot;Open&quot; <a class="code" href="interface_c_p_menu_item.html#a758d300e466e19c73646ffdff4e11750">action</a>:@selector(<a class="code" href="interface_c_p_menu_item.html#a758d300e466e19c73646ffdff4e11750">openDocument</a>:) <a class="code" href="interface_c_p_menu_item.html#a758d300e466e19c73646ffdff4e11750">keyEquivalent</a>:@&quot;o&quot;];</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;    [openMenuItem setImage:[[<a class="code" href="interface_c_p_theme.html">CPTheme</a> <a class="code" href="interface_c_p_theme.html#a19028d2f26f8d89be574ebdbdcfa5f16">defaultTheme</a>] <a class="code" href="interface_c_p_theme.html#acba903ceab7f3fa7cfd7d4de137cc5d4">valueForAttributeWithName</a>:@&quot;menu-general-icon-open&quot; <a class="code" href="interface_c_p_theme.html#acba903ceab7f3fa7cfd7d4de137cc5d4">forClass</a>:_CPMenuView]];</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;    [openMenuItem setAlternateImage:[[<a class="code" href="interface_c_p_theme.html">CPTheme</a> <a class="code" href="interface_c_p_theme.html#a19028d2f26f8d89be574ebdbdcfa5f16">defaultTheme</a>] <a class="code" href="interface_c_p_theme.html#a5dbd6b53455ad8cf5850c5389dc4628d">valueForAttributeWithName</a>:@&quot;menu-general-icon-open&quot; <a class="code" href="interface_c_p_theme.html#a5dbd6b53455ad8cf5850c5389dc4628d">inState</a>:CPThemeStateHighlighted <a class="code" href="interface_c_p_theme.html#a5dbd6b53455ad8cf5850c5389dc4628d">forClass</a>:_CPMenuView]];</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;    [mainMenu addItem:openMenuItem];</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;    var saveMenu = [[<a class="code" href="interface_c_p_menu.html">CPMenu</a> <a class="code" href="class_c_p_object.html#aa6d290852c6a151058e8e82d053db475">alloc</a>] <a class="code" href="interface_c_p_menu.html#a61eba957d564edf0ac0c9de21ea2e5c4">initWithTitle</a>:@&quot;Save&quot;],</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;        saveMenuItem = [[<a class="code" href="interface_c_p_menu_item.html">CPMenuItem</a> <a class="code" href="class_c_p_object.html#aa6d290852c6a151058e8e82d053db475">alloc</a>] <a class="code" href="interface_c_p_menu_item.html#a758d300e466e19c73646ffdff4e11750">initWithTitle</a>:@&quot;Save&quot; <a class="code" href="interface_c_p_menu_item.html#a758d300e466e19c73646ffdff4e11750">action</a>:@selector(<a class="code" href="interface_c_p_menu_item.html#a758d300e466e19c73646ffdff4e11750">saveDocument</a>:) <a class="code" href="interface_c_p_menu_item.html#a758d300e466e19c73646ffdff4e11750">keyEquivalent</a>:nil];</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;    [saveMenuItem setImage:[[<a class="code" href="interface_c_p_theme.html">CPTheme</a> <a class="code" href="interface_c_p_theme.html#a19028d2f26f8d89be574ebdbdcfa5f16">defaultTheme</a>] <a class="code" href="interface_c_p_theme.html#acba903ceab7f3fa7cfd7d4de137cc5d4">valueForAttributeWithName</a>:@&quot;menu-general-icon-save&quot; <a class="code" href="interface_c_p_theme.html#acba903ceab7f3fa7cfd7d4de137cc5d4">forClass</a>:_CPMenuView]];</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;    [saveMenuItem setAlternateImage:[[<a class="code" href="interface_c_p_theme.html">CPTheme</a> <a class="code" href="interface_c_p_theme.html#a19028d2f26f8d89be574ebdbdcfa5f16">defaultTheme</a>] <a class="code" href="interface_c_p_theme.html#a5dbd6b53455ad8cf5850c5389dc4628d">valueForAttributeWithName</a>:@&quot;menu-general-icon-save&quot; <a class="code" href="interface_c_p_theme.html#a5dbd6b53455ad8cf5850c5389dc4628d">inState</a>:CPThemeStateHighlighted <a class="code" href="interface_c_p_theme.html#a5dbd6b53455ad8cf5850c5389dc4628d">forClass</a>:_CPMenuView]];</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;    [saveMenu addItem:[[<a class="code" href="interface_c_p_menu_item.html">CPMenuItem</a> <a class="code" href="class_c_p_object.html#aa6d290852c6a151058e8e82d053db475">alloc</a>] <a class="code" href="interface_c_p_menu_item.html#a758d300e466e19c73646ffdff4e11750">initWithTitle</a>:@&quot;Save&quot; <a class="code" href="interface_c_p_menu_item.html#a758d300e466e19c73646ffdff4e11750">action</a>:@selector(<a class="code" href="interface_c_p_menu_item.html#a758d300e466e19c73646ffdff4e11750">saveDocument</a>:) <a class="code" href="interface_c_p_menu_item.html#a758d300e466e19c73646ffdff4e11750">keyEquivalent</a>:@&quot;s&quot;]];</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;    [saveMenu addItem:[[<a class="code" href="interface_c_p_menu_item.html">CPMenuItem</a> <a class="code" href="class_c_p_object.html#aa6d290852c6a151058e8e82d053db475">alloc</a>] <a class="code" href="interface_c_p_menu_item.html#a758d300e466e19c73646ffdff4e11750">initWithTitle</a>:@&quot;Save As&quot; <a class="code" href="interface_c_p_menu_item.html#a758d300e466e19c73646ffdff4e11750">action</a>:@selector(<a class="code" href="interface_c_p_menu_item.html#a758d300e466e19c73646ffdff4e11750">saveDocumentAs</a>:) <a class="code" href="interface_c_p_menu_item.html#a758d300e466e19c73646ffdff4e11750">keyEquivalent</a>:nil]];</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;    [saveMenuItem setSubmenu:saveMenu];</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;    [mainMenu addItem:saveMenuItem];</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;    var editMenuItem = [[<a class="code" href="interface_c_p_menu_item.html">CPMenuItem</a> <a class="code" href="class_c_p_object.html#aa6d290852c6a151058e8e82d053db475">alloc</a>] <a class="code" href="interface_c_p_menu_item.html#a758d300e466e19c73646ffdff4e11750">initWithTitle</a>:@&quot;Edit&quot; <a class="code" href="interface_c_p_menu_item.html#a758d300e466e19c73646ffdff4e11750">action</a>:nil <a class="code" href="interface_c_p_menu_item.html#a758d300e466e19c73646ffdff4e11750">keyEquivalent</a>:nil],</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;        editMenu = [[<a class="code" href="interface_c_p_menu.html">CPMenu</a> <a class="code" href="class_c_p_object.html#aa6d290852c6a151058e8e82d053db475">alloc</a>] <a class="code" href="interface_c_p_menu.html#a61eba957d564edf0ac0c9de21ea2e5c4">initWithTitle</a>:@&quot;Edit&quot;],</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;        undoMenuItem = [[<a class="code" href="interface_c_p_menu_item.html">CPMenuItem</a> <a class="code" href="class_c_p_object.html#aa6d290852c6a151058e8e82d053db475">alloc</a>] <a class="code" href="interface_c_p_menu_item.html#a758d300e466e19c73646ffdff4e11750">initWithTitle</a>:@&quot;Undo&quot; <a class="code" href="interface_c_p_menu_item.html#a758d300e466e19c73646ffdff4e11750">action</a>:@selector(<a class="code" href="interface_c_p_menu_item.html#a758d300e466e19c73646ffdff4e11750">undo</a>:) <a class="code" href="interface_c_p_menu_item.html#a758d300e466e19c73646ffdff4e11750">keyEquivalent</a>:CPUndoKeyEquivalent],</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;        redoMenuItem = [[<a class="code" href="interface_c_p_menu_item.html">CPMenuItem</a> <a class="code" href="class_c_p_object.html#aa6d290852c6a151058e8e82d053db475">alloc</a>] <a class="code" href="interface_c_p_menu_item.html#a758d300e466e19c73646ffdff4e11750">initWithTitle</a>:@&quot;Redo&quot; <a class="code" href="interface_c_p_menu_item.html#a758d300e466e19c73646ffdff4e11750">action</a>:@selector(<a class="code" href="interface_c_p_menu_item.html#a758d300e466e19c73646ffdff4e11750">redo</a>:) <a class="code" href="interface_c_p_menu_item.html#a758d300e466e19c73646ffdff4e11750">keyEquivalent</a>:CPRedoKeyEquivalent];</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;    [undoMenuItem setKeyEquivalentModifierMask:CPUndoKeyEquivalentModifierMask];</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;    [redoMenuItem setKeyEquivalentModifierMask:CPRedoKeyEquivalentModifierMask];</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;    [editMenu addItem:undoMenuItem];</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;    [editMenu addItem:redoMenuItem];</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;    [editMenu addItem:[[<a class="code" href="interface_c_p_menu_item.html">CPMenuItem</a> <a class="code" href="class_c_p_object.html#aa6d290852c6a151058e8e82d053db475">alloc</a>] <a class="code" href="interface_c_p_menu_item.html#a758d300e466e19c73646ffdff4e11750">initWithTitle</a>:@&quot;Cut&quot; <a class="code" href="interface_c_p_menu_item.html#a758d300e466e19c73646ffdff4e11750">action</a>:@selector(<a class="code" href="interface_c_p_menu_item.html#a758d300e466e19c73646ffdff4e11750">cut</a>:) <a class="code" href="interface_c_p_menu_item.html#a758d300e466e19c73646ffdff4e11750">keyEquivalent</a>:@&quot;x&quot;]];</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;    [editMenu addItem:[[<a class="code" href="interface_c_p_menu_item.html">CPMenuItem</a> <a class="code" href="class_c_p_object.html#aa6d290852c6a151058e8e82d053db475">alloc</a>] <a class="code" href="interface_c_p_menu_item.html#a758d300e466e19c73646ffdff4e11750">initWithTitle</a>:@&quot;Copy&quot; <a class="code" href="interface_c_p_menu_item.html#a758d300e466e19c73646ffdff4e11750">action</a>:@selector(<a class="code" href="interface_c_p_menu_item.html#a758d300e466e19c73646ffdff4e11750">copy</a>:) <a class="code" href="interface_c_p_menu_item.html#a758d300e466e19c73646ffdff4e11750">keyEquivalent</a>:@&quot;c&quot;]];</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;    [editMenu addItem:[[<a class="code" href="interface_c_p_menu_item.html">CPMenuItem</a> <a class="code" href="class_c_p_object.html#aa6d290852c6a151058e8e82d053db475">alloc</a>] <a class="code" href="interface_c_p_menu_item.html#a758d300e466e19c73646ffdff4e11750">initWithTitle</a>:@&quot;Paste&quot; <a class="code" href="interface_c_p_menu_item.html#a758d300e466e19c73646ffdff4e11750">action</a>:@selector(<a class="code" href="interface_c_p_menu_item.html#a758d300e466e19c73646ffdff4e11750">paste</a>:) <a class="code" href="interface_c_p_menu_item.html#a758d300e466e19c73646ffdff4e11750">keyEquivalent</a>:@&quot;v&quot;]];</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;    [editMenuItem setSubmenu:editMenu];</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;    [editMenuItem setHidden:YES];</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;    [mainMenu addItem:editMenuItem];</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;    [mainMenu addItem:[<a class="code" href="interface_c_p_menu_item.html">CPMenuItem</a> <a class="code" href="interface_c_p_menu_item.html#a0a069dafa60ba772e526907eaaf5f8bc">separatorItem</a>]];</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;    [CPApp setMainMenu:mainMenu];</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;}</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;+ (void)cibDidFinishLoading:(<a class="code" href="interface_c_p_cib.html">CPCib</a>)aCib</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;{</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;    [<span class="keyword">self</span> performActions];</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;}</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;+ (void)cibDidFailToLoad:(<a class="code" href="interface_c_p_cib.html">CPCib</a>)aCib</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;{</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;    <span class="keywordflow">throw</span> <span class="keyword">new</span> Error(<span class="stringliteral">&quot;Could not load main cib file. Did you forget to nib2cib it?&quot;</span>);</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;}</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;+ (void)reset</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;{</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;    _CPAppBootstrapperActions = nil;</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;}</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;<span class="keyword">@end</span></div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;</div>
<div class="line"><a name="l01436"></a><span class="lineno"><a class="code" href="category_c_p_event_07_c_p_application_modifier_flags_08.html"> 1436</a></span>&#160;<span class="keyword">@implementation </span><a class="code" href="category_c_p_event_07_c_p_application_modifier_flags_08.html">CPEvent (CPApplicationModifierFlags)</a></div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;</div>
<div class="line"><a name="l01441"></a><span class="lineno"><a class="code" href="category_c_p_event_07_c_p_application_modifier_flags_08.html#a9a878ef301a28d3295fe649123a26463"> 1441</a></span>&#160;+ (unsigned)modifierFlags</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;{</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="_c_p_application_8j.html#a2a6140d6a9d8a55a56913d76c5f8bda3">CPEventModifierFlags</a>;</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;}</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;<span class="keyword">@end</span></div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;</div>
<div class="line"><a name="l01448"></a><span class="lineno"><a class="code" href="category_c_p_application_07_c_p_synthesized_accessors_08.html"> 1448</a></span>&#160;<span class="keyword">@implementation </span><a class="code" href="category_c_p_application_07_c_p_synthesized_accessors_08.html">CPApplication (CPSynthesizedAccessors)</a></div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;</div>
<div class="line"><a name="l01453"></a><span class="lineno"><a class="code" href="interface_c_p_application.html#a1d9ae330a8ac3d0c05724639cc14ff60"> 1453</a></span>&#160;- (<a class="code" href="interface_c_p_theme_blend.html">CPThemeBlend</a>)themeBlend</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;{</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;    <span class="keywordflow">return</span> _themeBlend;</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;}</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;</div>
<div class="line"><a name="l01461"></a><span class="lineno"><a class="code" href="interface_c_p_application.html#a471125ab727bce08a3417e0ab65ad680"> 1461</a></span>&#160;- (void)setThemeBlend:(<a class="code" href="interface_c_p_theme_blend.html">CPThemeBlend</a>)aValue</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;{</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;    _themeBlend = aValue;</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;}</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;<span class="keyword">@end</span></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_0e4e8176c2dd688a0cdab60948de03e6.html">AppKit</a></li><li class="navelem"><a class="el" href="_c_p_application_8j.html">CPApplication.j</a></li>
    <li class="footer">Generated on Sun Mar 29 2015 14:04:30 for API by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.4 </li>
  </ul>
</div>
</body>
</html>
